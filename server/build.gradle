dependencies {

    compile project(":neo4j-server-extensions"),
            "$group:neo4j:$version",
            "log4j:log4j:$log4jVersion",
            "commons-configuration:commons-configuration:$commonsConfigurationVersion",
            "org.mortbay.jetty:jetty:$jettyVersion",
            "com.sun.jersey:jersey-server:$jerseyVersion",
            "de.huxhorn.lilith:de.huxhorn.lilith.3rdparty.rrd4j:$rrdVersion",
            "org.codehaus.jackson:jackson-jaxrs:$jacksonVersion",
            "org.codehaus.jackson:jackson-mapper-asl:$jacksonVersion",
            "org.neo4j:neo4j-shell:$version"

    compile("com.tinkerpop:gremlin:$gremlinVersion") {
        exclude module: "sesame-sail-api"
        exclude module: "gmaven-plugin"
        exclude module: "common"
        exclude module: "aduna-commons-iteration"
        exclude module: "jung-api"
    }

    //TODO remove this when  org.neo4j:neo4j is fixed
    compile("$group:neo4j-kernel:$version") {
        artifact {
            name = 'neo4j-kernel'
            type = 'jar'
            classifier = ''
        }
    }

    testCompile "org.hamcrest:hamcrest-all:$hamcrestVersion",
            "org.mockito:mockito-all:$mockitoVersion",
            "com.sun.jersey:jersey-client:$jerseyVersion",
            "jline:jline:$jlineVersion",
            "commons-io:commons-io:$commonsIoVersion"


    testCompile("$group:neo4j-kernel:$version") {
        artifact {
            name = 'neo4j-kernel'
            type = 'jar'
            classifier = 'tests'
        }
        artifact {
            name = 'neo4j-kernel'
            type = 'jar'
            classifier = ''
        }
    }
    testCompile "org.seleniumhq.webdriver:webdriver-firefox:0.9.7376"
    testCompile "org.seleniumhq.webdriver:webdriver-htmlunit:0.9.7376"
    testCompile("$group:neo4j-ha:$version") {
        artifact {
            name = 'neo4j-ha'
            type = 'jar'
            classifier = 'tests'
        }
        artifact {
            name = 'neo4j-ha'
            type = 'jar'
            classifier = ''
        }
    }
//    test {
//        maxParallelForks = 4
//        forkEvery = 4
//    }
}

sourceSets {
    integrationTest {
        compileClasspath += project(':neo4j-server').sourceSets.test.classes
        compileClasspath += project(':neo4j-server').sourceSets.functionalTest.classes
//TODO rename webtest into integrationTest
        java {
            srcDir "src/webtest/java"
        }
    }
}
